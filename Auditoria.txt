**AUDITORÍA DEL 01/02/2026 - TAREA: BACKLOG – Corrección de espacio vacío y resultados ocultos en búsqueda móvil**

**Archivos Auditados:**
1.  `style.css`
2.  `main.js`

**Contexto:**
La auditoría se centra en la implementación actual de la barra de búsqueda y el layout en modo móvil para identificar las causas de los problemas descritos en el backlog y establecer una base para las correcciones planificadas.

---
**1. Análisis de `style.css`**

*   **Líneas 368-422 (`body.search-active`):**
    *   **Hallazgo:** El principal causante del espaciado excesivo es la regla `padding: 60px 20px 0;` aplicada a `.container` cuando la búsqueda está activa. Este valor es estático y no se adapta a la altura real de la barra de búsqueda ni a la presencia del teclado móvil.
    *   **Observación:** La regla `margin-bottom: 0 !important;` en `#search-wrapper` sugiere que se encontró un problema previo de especificidad con un estilo en línea, lo cual es una práctica frágil.

*   **Líneas 164-173 (`.search-container`):**
    *   **Hallazgo:** El contenedor de la barra de búsqueda no tiene una propiedad `height` definida. Su altura es implícita y depende del `padding` y `font-size` del `input` interno. Esto es la causa raíz de la inconsistencia de altura mencionada en la Tarea 2.

*   **Líneas 414-422 (Posicionamiento en modo búsqueda):**
    *   **Hallazgo:** El posicionamiento del logo y el input en modo fijo (`.search-active`) se basa en valores "mágicos" (`top: 22px`, `left: 30px`, etc.) que están acoplados a la altura implícita actual. Estos valores deberán ser recalculados una vez se establezca la altura fija de `55px`.

*   **Media Queries:**
    *   **Hallazgo:** No se encontraron media queries específicas que ajusten el layout de la búsqueda activa para pantallas muy pequeñas (ej. `<480px`), como se requiere en la Tarea 7. Las media queries existentes afectan componentes generales pero no el comportamiento específico de la búsqueda móvil.

---
**2. Análisis de `main.js`**

*   **Líneas 40-56 (Listeners de Búsqueda):**
    *   **Hallazgo:** La única lógica de JavaScript relacionada con la búsqueda es la adición y eliminación de la clase `search-active` en el `body` en los eventos `focus` y `blur`.
    *   **Observación:** No existe ninguna interacción con la API `visualViewport`.

*   **Ausencia de Lógica de Teclado Móvil:**
    *   **Hallazgo CRÍTICO:** El archivo carece por completo de la lógica necesaria para resolver el problema principal:
        *   No hay listeners para el evento `resize` de `window.visualViewport`.
        *   No se realiza ninguna comparación entre `window.innerHeight` y `window.visualViewport.height` para detectar si el teclado está visible.
        *   No se calcula ni se aplica dinámicamente una `max-height` al contenedor de resultados para evitar que el teclado lo oculte.
        *   La función `handleViewportChange` mencionada en el backlog no existe.

---
**Conclusión de la Auditoría:**
La implementación actual es puramente cosmética y controlada por CSS. Falla en dispositivos móviles porque no tiene ninguna capacidad de reaccionar a los cambios de la ventana gráfica (`viewport`) cuando el teclado aparece. La solución requiere una implementación significativa de nueva lógica en `main.js` para gestionar el `visualViewport` y una refactorización de los estilos en `style.css` para que se basen en una altura de barra fija y consistente.
