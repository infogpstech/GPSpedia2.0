**AUDITORÍA DEL SISTEMA GPSpedia v2.0**

**FECHA DE AUDITORÍA:** 2024-07-30

**AUDITOR:** Jules

---

### **INCIDENTE: Regresión Crítica - `Nombre_Completo` es sobrescrito por `SessionToken` al iniciar sesión**

**1. RESUMEN DEL PROBLEMA:**
   - Se reportó un bug crítico donde el campo `Nombre_Completo` de un usuario en la base de datos es reemplazado por el `SessionToken` al iniciar sesión.

**2. ANÁLISIS DE CAUSA RAÍZ (RCA) - CORREGIDO:**
   - **Auditoría Inicial:** La hipótesis inicial, basada en logs de cambios anteriores (`V8.4.1`), apuntaba a un mapa de columnas (`COLS_USERS`) incorrecto en el servicio de autenticación (`services/auth/auth.js`). Se sospechaba que a la constante le faltaba la entrada `SessionToken: 8`.
   - **Auditoría de Código Fuente (Actual):** Una revisión directa del archivo `services/auth/auth.js` en el repositorio demostró que esta hipótesis era **incorrecta**. El código fuente **actual es correcto** y la constante `COLS_USERS` sí incluye las 8 columnas, con `SessionToken` correctamente mapeado a la columna 8.
   - **Conclusión Definitiva:** El problema no reside en el código del repositorio, sino en el **código que está actualmente en producción**. La versión del servicio `GPSpedia-Auth` que está desplegada en Google Apps Script es una versión **obsoleta** que todavía contiene el mapa de 7 columnas defectuoso. Es esta versión desactualizada la que, al ejecutarse, provoca el bug.

**3. SOLUCIÓN:**
   - **NO SE REQUIEREN CAMBIOS DE CÓDIGO.** El código en el repositorio ya contiene la solución.
   - La única acción correctiva es **redesplegar el servicio `GPSpedia-Auth` en Google Apps Script** utilizando la última versión del archivo `services/auth/auth.js` de este repositorio.
   - Esta acción debe ser llevada a cabo por el Project Manager o la persona encargada de los despliegues.

**4. ESTADO:**
   - **NO ES UN BUG DE CÓDIGO - PENDIENTE DE DESPLIEGUE.**
   - El trabajo de desarrollo para solucionar este problema está completo, pendiente únicamente de la acción de despliegue para que la corrección se haga efectiva en el ambiente de producción.

---
