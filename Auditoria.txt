**AUDITORÍA GENERAL COMPLETA FRONTEND - GPSpedia v4.9.7**

**1. LISTA DE REGLAS CSS EN CONFLICTO**

- **Conflicto de Posicionamiento y Flujo (Crítico):**
  - **Línea 107 (`.app-logo`):** No define `position` (es `static` por defecto).
  - **Línea 409 (`body.search-active .app-logo`):** Cambia a `position: absolute`.
  - **Efecto:** El cambio de `static` a `absolute` rompe el hilo de renderizado; el navegador no puede animar la transición entre el flujo normal del documento y coordenadas absolutas (`top`, `left`). Esto causa el "salto" visual del logo.

- **Falta de Transiciones en el Estado Base:**
  - **Línea 102 (`.title-welcome-group`):** Carece de propiedad `transition`.
  - **Línea 360-369:** Se le aplica `opacity: 0` y `max-height: 0` en modo búsqueda.
  - **Efecto:** El mensaje de bienvenida desaparece de forma instantánea, rompiendo la fluidez del header superior.

- **Inconsistencia de Transiciones (Transition Mismatch):**
  - **Línea 128 (`.header-controls`):** `transition: all 0.35s ease-in-out`
  - **Línea 438 (`.section-selector`):** `transition: all 0.35s ease-in-out`
  - **Línea 76 (`.main-header`):** `transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1)`
  - **Efecto:** Los elementos internos terminan su animación antes que el contenedor padre, produciendo una sensación de desajuste o "lag" visual.

- **Uso de !important que bloquea interpolación:**
  - **Línea 420 (`body.search-active .app-logo`):** Usa `opacity: 1 !important` y `visibility: visible !important`.
  - **Efecto:** Aunque asegura visibilidad, si se intenta animar el desvanecimiento al cerrar la búsqueda, el `!important` puede impedir que el motor de renderizado calcule los valores intermedios.

**2. IDENTIFICACIÓN DE BLOQUEOS Y FALLOS**

- **Por qué las animaciones no funcionan:** El problema raíz es el **cambio de contexto de posicionamiento**. Al activar la búsqueda, el header pasa a ser un elemento flotante (`fixed`) y el logo se vuelve `absolute`. El motor de CSS prioriza el re-cálculo del layout sobre la animación, ejecutando el cambio de posición de forma atómica (instantánea).
- **Por qué los cambios no surten efecto:** Existen reglas base que definen `transition: all 0.35s`, las cuales entran en conflicto con las reglas específicas aplicadas en v4.9.7. Al haber múltiples definiciones de `transition` para el mismo elemento, el navegador elige una, ignorando las demás.

**3. MAPA DE CONTROL DEL HEADER**

- **index.html:** Define la estructura física (Master Header > Top/Bottom).
- **style.css (Líneas 76-180):** Controla el diseño base y las transiciones iniciales.
- **style.css (Líneas 360-430):** Controla el estado `search-active` ( overrides de búsqueda).
- **main.js (Líneas 57-69):** Controla el trigger de la animación (listeners focus/blur) y el timing de remoción de la clase.

**4. RECOMENDACIÓN DE LIMPIEZA (PARA ACCIÓN POSTERIOR)**

- **Unificación:** Las transiciones deben declararse **únicamente** en las clases base (`.main-header`, `.app-logo`, etc.) para que apliquen tanto al entrar como al salir del estado activo.
- **Estabilización de Posición:** El logo debe tener `position: absolute` tanto en estado base como activo, ajustando solo sus coordenadas `top`, `left` y `transform`. Esto permitirá al navegador interpolar el movimiento suavemente.
- **Sincronización de Tiempos:** Estandarizar todas las transiciones del header a un valor único (ej. `0.4s`) y ajustar el delay en `main.js` para que coincida exactamente.
- **Orden de Cascada:** Mover todas las reglas de `body.search-active` al final del archivo CSS para evitar el uso de `!important`.

**CONCLUSIÓN DE AUDITORÍA:**
El header sufre de un conflicto de jerarquía visual y técnica. Se intenta animar el contenido mientras se cambia la estructura del contenedor, lo que resulta en los saltos observados. El sistema está listo para una corrección que estabilice el posicionamiento antes de aplicar la animación.


**AUDITORÍA DE EJECUCIÓN QUIRÚRGICA (03/02/2026) - v4.9.8**

**1. SOLUCIÓN AL SALTO DE POSICIONAMIENTO:**
- El header ahora es fixed permanentemente. El salto relative->fixed desaparece.
- Se ajustó el padding base del container a 135px para evitar solapamiento inicial.

**2. SOLUCIÓN A LA RUPTURA DEL LOGO:**
- Logo absolute desde el inicio. Interpolación de coordenadas 0,0 -> 50%,30px verificada.
- Se añadió padding-left: 111px a la derecha del logo base para proteger el título.

**3. SOLUCIÓN AL CORTE POR JS:**
- main.js timeout sincronizado a 500ms.

**4. RESULTADO:**
- Animación fluida de 500ms sin interrupciones.
