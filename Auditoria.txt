**AUDITORÍA DE add_cortes.html (04/02/2026)**

- **Líneas 105-108:** El contenedor de matches (#matches-container) está vacío por defecto.
- **Línea 233-247 (displayMatches):**
    - Hallazgo: Los botones usan onclick con funciones que no son globales debido al script type="module". Esto los hace inactivos.
    - Hallazgo: El botón "Cancelar" hace window.location.href='index.html', lo cual saca al usuario del flujo. Debería volver al Paso 1.
    - Hallazgo: Faltan detalles de cortes existentes (Corte 1, 2, 3) e imagen del vehículo.
    - Hallazgo: No hay un botón de "Volver" a la etapa 1 de forma explícita si el usuario quiere corregir datos.
- **Línea 261 (proceedToStage2):**
    - Hallazgo: No hay un botón para volver a la etapa 1 o 1.5 desde la etapa 2.
- **Imagen Logic:** Faltan las funciones para construir las URLs de imagen con sz=1000.
- **ID Generation (Backend write.js):**
    - El prompt menciona que no se genera el ID. En write.js se usa copyTo y flush() con un sleep(1500). Si la fórmula no está en la primera columna del registro copiado, no funcionará.
    - Hallazgo en write.js: clearContent se aplica a dataRange (cols 2 a lastColumn-1), preservando la col 1. Esto es correcto si la col 1 tiene la fórmula.

**PLAN DE ACCIÓN:**
1. Modificar displayMatches para usar event listeners o exponer funciones a window.
2. Agregar visualización de imagen y cortes en displayMatches.
3. Implementar getImageUrl con sz=1000.
4. Agregar botones de navegación "Volver".
5. Asegurar que Stage 3 se active correctamente tras guardar en Stage 2.
6. Revisar write.js para asegurar la presencia de la fórmula de ID si es necesario.
