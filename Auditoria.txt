**AUDITORÍA DEL 02/02/2026 - TAREA: BACKLOG – Corrección de espacio vacío y resultados ocultos en búsqueda móvil**

**Archivos Auditados:**
1.  `index.html`
2.  `style.css`
3.  `main.js`
4.  `ui.js`

**Contexto:**
Se audita la implementación actual para identificar las causas del "espacio fantasma" y el ocultamiento de resultados por el teclado en dispositivos móviles durante la búsqueda activa.

---
**1. Análisis de `index.html`**
- **Línea 112:** El `#search-wrapper` tiene un estilo en línea `margin-bottom: 10px;`. Aunque existe una regla en `style.css` con `!important` para anularlo en `search-active`, la estructura general depende de márgenes manuales.
- **Línea 90:** La estructura `.container` envuelve todo el contenido principal.
- **Observación:** No hay contenedores específicos para manejar el scroll de forma independiente del body, lo que complica la gestión del teclado móvil.

---
**2. Análisis de `style.css`**
- **Líneas 2-15:** `html { height: 100%; }` y `body { min-height: 100%; }`. Se usa el modelo estándar pero sin soporte para variables de altura dinámica (`visualViewport`).
- **Línea 48:** `.container` tiene `flex: 1 0 auto;`. Esto hace que el contenedor se estire para llenar el body, pero no limita su altura al viewport.
- **Línea 388:** `body.search-active .container { padding: 60px 20px 0; }`. Este padding es estático. Si la altura del viewport cambia (teclado), el padding no se ajusta, lo que puede generar el "espacio vacío" o empujar el contenido fuera de la vista.
- **Línea 394:** `body.search-active .search-container { position: fixed; top: 15px; }`. Posicionamiento fijo relativo al viewport.
- **Hallazgo:** El scroll se maneja en el `body` (por defecto). Al abrir el teclado, el `body` se desplaza o se encoge dependiendo del navegador, y los elementos `fixed` pueden quedar mal posicionados o el contenido oculto.

---
**3. Análisis de `main.js`**
- **Líneas 43-56:** Solo manejan el toggle de la clase `search-active`.
- **Hallazgo Crítico:** Ausencia total de lógica para `visualViewport`. No hay detección de la altura real visible ni ajuste dinámico de variables CSS.
- **Hallazgo de Regresión:** El `ChangesLogs.txt` menciona una versión 4.9.1 que corregía esto, pero el código actual (v4.8.1 según `index.html`) no refleja esos cambios. Se debe re-implementar siguiendo el patrón arquitectónico oficial.

---
**4. Análisis de `ui.js`**
- No se encontraron dependencias directas de `vh` o lógica de scroll que interfiera con la tarea. El renderizado de resultados en `mostrarResultadosDeBusqueda` (Líneas 538+) limpia el contenedor `#contenido`, lo cual es correcto.

---
**Conclusión de la Auditoría:**
La causa raíz es la falta de sincronización entre el layout CSS y el viewport real de dispositivos móviles. El uso de `padding-top` estático y la falta de un contenedor de scroll dedicado con altura dinámica impiden que los resultados se ajusten correctamente cuando aparece el teclado.

**Riesgos Identificados:**
- Romper la animación de expansión de la búsqueda al cambiar el modelo de scroll.
- Conflictos de especificidad CSS con los estilos en línea existentes.
- Incompatibilidad entre navegadores (Safari iOS vs Chrome Android) en el manejo del `visualViewport`.
