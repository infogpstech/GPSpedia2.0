=================================================
 INSTRUCTIVO Y AUDITORÍA DEL PROYECTO GPSpedia 2.0
=================================================
Fecha de Auditoría: 2024-08-03
Versión del Documento: 3.0

Este documento detalla el estado actual del proyecto GPSpedia 2.0, incluyendo regresiones, bugs confirmados, funcionalidades pendientes y el flujo de trabajo para el desarrollo.

---------------------------------
NORMAS OBLIGATORIAS DE DESARROLLO
---------------------------------

**A. Control de Versiones y Documentación:**
1.  **Actualización de Versión:** Cualquier cambio debe reflejarse en el número de versión visible en `index.html` y en los servicios de Apps Script.
2.  **Consulta y Actualización de Documentación:** Antes y después de cualquier desarrollo, se deben consultar y actualizar `README.md`, `INSTRUCTIVO.TXT` y `CHANGESLOGS.txt`.
3.  **Detalle en `CHANGESLOGS.txt`:** Cada entrada debe especificar el archivo y número de línea modificado.

**B. Calidad del Código:**
1.  **Comentarios:** Todo código nuevo o modificado debe tener un comentario explicando su propósito.

**C. Proceso de Aprobación:**
1.  **Verificación Post-Commit:** Una tarea solo se considera completada después de un commit y la validación explícita del Project Manager.

---------------------------------
PROCESO DE TRABAJO POR FASES
---------------------------------

Para organizar el desarrollo y asegurar la calidad, el trabajo se dividirá en fases. Cada fase se enfocará en un conjunto específico de tareas y culminará en un commit.

1.  **Asignación de Tareas:** Se define un conjunto de tareas (ej. "Ajustes de UI en `index.html`").
2.  **Desarrollo y Commit:** Se realizan todos los cambios de código necesarios para completar la fase.
3.  **Revisión Post-Commit:** El Project Manager revisa los cambios.
    *   **Si es satisfactorio:** Se marca la tarea como completada en `README.md` y `INSTRUCTIVO.TXT`. Se registra el éxito en `CHANGESLOGS.txt`.
    *   **Si NO es satisfactorio:** Se registra el problema en `CHANGESLOGS.txt` y se crea una nueva tarea para solucionarlo. No se marcan las tareas como completadas.
4.  **Nuevas Solicitudes:** Cualquier nueva implementación o cambio solicitado se agregará primero a la lista de pendientes en `README.md` y `INSTRUCTIVO.TXT` sin marcar. Solo se marcarán como completadas después de un ciclo de desarrollo y una revisión post-commit exitosa.

---------------------------------
ESTADO ACTUAL DEL PROYECTO (CHECKLIST)
---------------------------------

### Bugs y Regresiones por Corregir
- [x] **Carga de Información en Secciones:** Las secciones "Tutoriales" y "Relay" no cargan su contenido. *(Solucionado en v3.1.8 con la refactorización del backend).*
- [ ] **Organización del Pie de Página:** Los enlaces del footer deben aparecer debajo del aviso de copyright.
- [ ] **Layout del Modal de Detalle:** El nombre del colaborador debe estar posicionado sobre los botones de feedback.
- [ ] **Estilo de Botones de Feedback:** Los botones "Útil" y "Reportar" en el modal no tienen el estilo aplicado.
- [ ] **Visibilidad de Tercera Opción de Corte:** La tercera opción de corte no es visible en el modal, incluso si existen los datos.
- [ ] **Posición del Botón Limpiar Búsqueda:** El botón "x" de la barra de búsqueda se muestra fuera de su contenedor.
- [ ] **Error en Carga de Nombre de Usuario:** En la gestión de usuarios (`users.js`), el "Nombre de usuario" se muestra como `undefined`.

### Mejoras de Funcionalidad Pendientes
- [ ] **Mejora del Sistema de Búsqueda (`checkVehicle`):**
    - [ ] Implementar una lógica de búsqueda flexible que muestre múltiples opciones si hay coincidencias parciales (ej. "Frontier" debe poder encontrar "Frontier NP300 SE").
    - [ ] La búsqueda debe considerar coincidencias con palabras separadas o la primera palabra completa.
- [ ] **Mejora del Sistema de Feedback (Colaborador):**
    - [ ] Modificar el formato del campo "Colaborador" para incluir la contribución específica entre paréntesis.
    - [ ] Ejemplo: `Byron López (Cort 1, Apert.)`.
    - [ ] Si hay múltiples colaboradores, deben aparecer en líneas separadas. Ejemplo: `Byron López (Cort 1, Apert.)\nJoel Reyes (Cort 2, C. Alimen.)`.
- [ ] **Implementación de Sistema de Debugging Integral:**
    - [ ] **Backend:** Cada microservicio debe tener su propio módulo de debugging para responder a llamadas cURL.
    - [ ] **Frontend:** Crear una consola de debugging en `index.html`, accesible solo para el rol "Desarrollador".
    - [ ] **Funcionalidades de la Consola:**
        - [ ] Visualizar el estado y los errores de los servicios.
        - [ ] Guardar registros (error, advertencia, etc.) en la hoja "Logs" de Google Sheets.
        - [ ] Activar/desactivar funciones del navegador para prevenir debugging externo (ej. F12, menú contextual, copiar, zoom).
- [ ] **Implementar Estrategia de Carga de Imágenes Optimizada (Lazy Load):**
    - [ ] **Tarjetas del catálogo:** Cargar miniaturas de baja resolución (ej. `sz=w200`) para acelerar la carga inicial.
    - [ ] **Modal de detalle:** Al abrir el modal, cargar miniaturas de resolución media (ej. `sz=w800`).
    - [ ] **Lightbox:** Al hacer clic en una imagen del modal, mostrar la imagen en su resolución original (ej. `sz=w2048`) en un lightbox.
    - [ ] **Seguridad en Lightbox:** En la vista de lightbox, deshabilitar el menú contextual, la función de copiar y las herramientas de desarrollador (F12) para proteger las imágenes. La única interacción permitida debe ser el zoom.
- [ ] **Refactorizar Base de Datos y Lógica para Soportar Rangos de Años:**
    - [ ] **Cambio de Esquema:** En la hoja "Cortes", reemplazar `Año (Generacion)` por `anoDesde` y `anoHasta`.
    - [ ] **Migración de Datos:** Planificar la migración de datos existentes a las nuevas columnas.
    - [ ] **Actualización de Código:** Actualizar todos los servicios y el frontend para usar la nueva estructura.

### Plan Estratégico de Evolución (GPSpedia v3.3)
- [ ] **Fase 1: Migración a Nueva Infraestructura de Base de Datos:**
    - [ ] Diseñar el nuevo esquema de base de datos optimizado.
    - [ ] Crear y verificar el script de migración de datos.
    - [ ] Actualizar todos los servicios para que apunten al nuevo Spreadsheet.
- [ ] **Fase 2: Implementación de "Más Buscados":**
    - [ ] Desarrollar el backend para contar búsquedas y servir la lista.
    - [ ] Implementar la nueva sección de "Más Buscados" en el frontend.
- [ ] **Fase 3: Implementación de Edición "In-Modal" con Permisos:**
    - [ ] Crear el endpoint `updateVehicleData` con lógica de permisos por rol.
    - [ ] Adaptar la UI del modal para permitir la edición basada en los permisos del usuario.
- [ ] **Fase 4: Nuevas Propuestas de Eficiencia:**
    - [ ] Implementar un modo offline robusto para consulta de datos.
    - [ ] Desarrollar la funcionalidad de notas personales por vehículo.
    - [ ] Añadir la capacidad de compartir detalles de vehículos mediante código QR.

### Revisiones y Ajustes de UI Pendientes
- [ ] **Ajuste del Encabezado Principal (`index.html`):**
    - [ ] Posicionar el encabezado (`GPSpedia`) a la izquierda.
    - [ ] Mostrar el saludo de bienvenida justo debajo del título, con una fuente un 20% más pequeña.
- [ ] **Ajuste de "Últimos Agregados" (`index.html`):**
    - [ ] En vista móvil/PWA, mostrar los últimos 6 cortes en lugar de 5.
    - [ ] En vista web, mostrar una mayor cantidad de tarjetas según el ancho de la pantalla.
- [ ] **Ajuste de Espaciado General (`index.html`):**
    - [ ] Reducir los espacios verticales y horizontales entre los contenedores principales (header, barra de búsqueda, botones de sección, contenido, footer).
    - [ ] Ajustar el espaciado vertical de las tarjetas para mantener la consistencia visual tras la reducción del espaciado horizontal.

### Nuevas Funcionalidades Pendientes
- [ ] **Creación de Página de Información (`info.html`):**
    - [ ] Desarrollar una página estática con las secciones "Sobre Nosotros", "Contáctenos" y "Preguntas Frecuentes".
    - [ ] **"Sobre Nosotros":** Adaptar la descripción del `README.md` a un lenguaje para el consumidor final.
    - [ ] **"Contáctenos":** Crear un formulario (Nombre Organización, Correo, Teléfono, Mensaje) que envíe datos a una nueva hoja de Google Sheets.
    - [ ] **"Preguntas Frecuentes":** Crear un acordeón explicando las funcionalidades del catálogo para nuevos usuarios.
