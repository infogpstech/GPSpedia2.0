Importante: 
PROHIBIDO AGREGAR CONTENIDO ANTES DEL SIGUIENTE BLOQUE DE TEXTO. 

— PROCEDIMIENTO OBLIGATORIO DE TRABAJO.
===================================================================

Este procedimiento es de CUMPLIMIENTO OBLIGATORIO en TODOS los proyectos.
No se permite omitir, alterar ni reordenar pasos.

--------------------------------------------------
FLUJO PRINCIPAL DE TRABAJO
--------------------------------------------------

1. AUDITORÍA INICIAL DEL ARCHIVO
   - Auditar el/los archivo(s) involucrados.
   - Revisión archivo por archivo.
   - Revisión línea por línea.
   - Identificar estado actual, riesgos, dependencias y efectos colaterales.
   - PROHIBIDO modificar código en esta etapa.

2. REGISTRO DE HALLAZGOS
   - Registrar TODOS los hallazgos en Auditoría.txt.
   - Crear nueva entrada o actualizar la existente.
   - PROHIBIDO eliminar información previa.
   - NO realizar correcciones durante la auditoría.

3. MANEJO DE HALLAZGOS FUERA DE ALCANCE
   - Si se detectan problemas fuera de la tarea actual:
     a) Resolverlos en el MISMO commit SOLO si es seguro.
     b) Si no es posible:
        -> Registrar nueva tarea en Instrucciones.txt
        -> Referenciarla en Auditoría.txt

4. RESPALDO OBLIGATORIO ANTES DE EDICIÓN
   - Crear copia exacta del/los archivo(s) a modificar.
   - El respaldo DEBE conservar:
     · Nombre original
     · Contenido íntegro
   - El respaldo se usa EXCLUSIVAMENTE para comparación posterior.

5. EJECUCIÓN DE LA TAREA
   - Implementar ÚNICAMENTE lo solicitado.
   - PROHIBIDO:
     · Cambiar estilos no relacionados
     · Alterar flujos existentes
     · Introducir optimizaciones no solicitadas
   - Todo cambio debe estar justificado por la tarea.

6. VERIFICACIÓN FUNCIONAL
   - Confirmar que la tarea cumple su objetivo.
   - Verificar que no se rompan funciones existentes.
   - Probar flujos relacionados directa e indirectamente.

7. COMPARACIÓN POST-EDICIÓN (OBLIGATORIA)
   - Comparar archivo editado contra el respaldo previo.
   - Identificar:
     · Líneas eliminadas
     · Líneas modificadas
     · Bloques sobreescritos
   - Verificar que:
     -> TODO cambio esté directamente relacionado con la tarea.
   - Si se detectan cambios ajenos:
     -> REVERTIRLOS inmediatamente
     -> Repetir la comparación
-Los archivos de Respaldo se debe eliminar DESPUES de la revision de codigo de Code Review. 
-Todo archivo, captura generado para la verificación visual o ejecutable debe de ser eliminado en el pre-commit. 

8. VERIFICACIÓN DE INTEGRIDAD Y EFECTOS COLATERALES
   - Revisar dependencias internas y externas.
   - Detectar efectos colaterales visuales o lógicos.
   - Confirmar que no existen regresiones.

9. REVISIÓN FINAL DE CÓDIGO
   - Revisión completa nuevamente.
   - Línea por línea.
   - Función por función.
   - Evaluar consistencia, claridad y impacto.

10. REGISTRO EN CHANGESLOGS.TXT
    - Registrar TODOS los cambios realizados.
    - Indicar:
      · Archivo modificado
      · Líneas afectadas
      · Descripción objetiva
    - PROHIBIDO asumir éxito o usar frases de cierre.

11. ACTUALIZACIÓN DE INSTRUCCIONES.TXT
    - Mover la tarea ejecutada a:
EXTENSIÓN OBLIGATORIA POR CODE REVIEW
--------------------------------------------------

Si el Code Review detecta:
- Fallas
- Bloqueantes
- Riesgos
- Cambios requeridos

ENTONCES:
-> Este MISMO procedimiento DEBE aplicarse nuevamente
-> Incluso si implica modificar archivos ya editados
-> NO se permiten correcciones parciales


==================================================
PROTOCOLO DE RESULTADO DE CODE REVIEW
==================================================

--------------------------------------------------
FLUJO DE ANÁLISIS
--------------------------------------------------

1. LECTURA COMPLETA DEL CODE REVIEW
   - Leer TODO el informe.
   - No omitir secciones.

2. SAFETY & SIDE EFFECTS
   - Se considera FUENTE DE VERDAD PRINCIPAL.
   - SOLO se ignora si el Code Review solicita
     explícitamente revertir cambios.

--------------------------------------------------
TRATAMIENTO DE REVERSIÓN
--------------------------------------------------

3. EVALUACIÓN OBLIGATORIA

   a) CAMBIOS "OUT OF SCOPE"
      - Verificar si pertenecen a:
        · Tareas anteriores
        · Commits previos aprobados

      - Si pertenecen a tareas anteriores:
        -> IGNORAR solicitud de reversión
        -> CONTINUAR con el commit actual

   b) CAMBIOS DE LA TAREA ACTUAL
      - Si los cambios NO solicitados
        fueron introducidos durante la tarea actual:
        -> REALIZAR reversión
        -> REGISTRAR el motivo

--------------------------------------------------
IMPACTO EN EL FLUJO
--------------------------------------------------

4. REINICIO DEL CICLO
   - Toda observación que implique cambios:
     -> REINICIA el ciclo completo
        desde la AUDITORÍA INICIAL

   - El reinicio NO afecta:
     · Commits anteriores
     · Tareas aprobadas
     · Cambios fuera de alcance


--------------------------------------------------
DOCUMENTACIÓN OBLIGATORIA
--------------------------------------------------

Toda acción derivada del Code Review
DEBE quedar registrada en:
- Auditoría.txt
- ChangesLogs.txt
- Instrucciones.txt (si aplica)


--------------------------------------------------
REGLA FINAL ABSOLUTA
--------------------------------------------------

SI NO SE AUDITA, NO SE CAMBIA.
SI NO SE REGISTRA, NO EXISTE.

El incumplimiento de CUALQUIER paso
INVALIDA el proceso completo.


— ZONAS SEGURAS (ACCESO RESTRINGIDO - PRECAUCIÓN)
===================================================================
Las siguientes secciones del código y funcionalidades están bajo PROTECCIÓN CRÍTICA y se consideran ZONAS SEGURAS. Cualquier modificación de su funcionamiento, lógica o estilos requiere autorización expresa y auditoría rigurosa.

1. FORMULARIO AGREGAR CORTES (add_cortes.html):
   - Etapa 1: Verificación de Vehículo.
   - Etapa 1.5: Modal de Verificación (Anti-duplicado).
   - Etapa 2: Registro de Nuevo Corte.

2. NAVEGACIÓN Y MENÚ LATERAL (index.html, main.js):
   - Listeners de navegación (Cortes, Tutoriales, Relay).
   - Lógica de Modo Oscuro y persistencia del tema.
   - Modal de Dashboard y visualización de logs de actividad.

3. LAYOUT PRINCIPAL Y FOOTER (index.html, style.css):
   - Estructura flex-column del body.
   - Padding inferior del .container para evitar solapamiento con el footer.
   - Visibilidad del carrusel de marcas en la página de inicio.

4. GESTIÓN DE USUARIOS Y RBAC (users.html, services/users/users.js):
   - Lógica de filtrado por rol (RBAC) en frontend y backend.
   - Edición de perfil propio y restricciones de cambio de username.
   - Modales de cambio de contraseña y edición de nombre.

Cualquier cambio en estas zonas invalidará el commit.

---
*No hay tareas pendientes en esta sección.*

---
BACKLOG – INSTRUCCIONES GENERALES (FRONTEND / DOCUMENTACIÓN / PWA)

==================================================
5. **TÍTULO: Lógica de Backend para Gestión de Años y Votos**
   - **ESTADO:** PENDIENTE
   - **ALCANCE:** Backend (Feedback Service)
   - **DESCRIPCIÓN:** Implementar la lógica de backend para registrar los votos de años y la hoja de cálculo para almacenar dichos votos.

6. **TÍTULO: Dashboard de Desempeño para Supervisores**
   - **ESTADO:** PENDIENTE
   - **ALCANCE:** UI / Backend
   - **DESCRIPCIÓN:** Crear la nueva sección de Dashboard de Desempeño específicamente para roles de Supervisor.

7. **TÍTULO: Funcionalidad de Edición "In-Modal"**
   - **ESTADO:** PENDIENTE
   - **ALCANCE:** Frontend (UI) / Backend
   - **DESCRIPCIÓN:** Permitir la edición de datos técnicos directamente desde el modal de detalles del vehículo.

8. **TÍTULO: Lógica de Backend para el Sistema de Gestión de Feedback (Inbox)**
   - **ESTADO:** PENDIENTE
   - **ALCANCE:** Backend (Feedback Service)
   - **DESCRIPCIÓN:** Completar la lógica de backend para el procesamiento de mensajes en el Inbox.

9. **TÍTULO: Expansión de Rango de Años por Feedback**
   - **ESTADO:** PENDIENTE
   - **ALCANCE:** Frontend (UI) / Backend
   - **DESCRIPCIÓN:** Implementar la interfaz para sugerir nuevos años y la lógica de backend para expansión de rangos.

---
**TAREAS COMPLETADAS (Validadas por el PM)**
---
1. **TÍTULO: Lanzamiento Global GPSpedia v2.0 (v2.0.0)**
   - **ESTADO:** COMPLETADO
   - **ALCANCE:** Global (Frontend y Backend)
   - **DESCRIPCIÓN DETALLADA:**
     - **Versioning:** Sincronización de todos los archivos a la versión v2.0.0.
     - **README:** Actualización integral con descripción funcional, flujos de registro y comparativa técnica.
     - **UI Branding:** Actualización de footer y modal de login con la nueva identidad v2.0.
     - **FAQ:** Implementación de lógica y estilos para el acordeón de preguntas frecuentes.
     - **Sobre Nosotros:** Corrección de terminología técnica para tipos de cortes.

2. **TÍTULO: Implementación de Modal de Verificación y Mejoras en Flujo de Cortes (v4.9.15)**
   - **ESTADO:** COMPLETADO
2. **TÍTULO: Restauración de Funciones del Menú Hamburguesa, Modo Oscuro y Fix de Footer (v4.9.18)**
   - **ESTADO:** COMPLETADO
   - **ALCANCE:** index.html, main.js, style.css
   - **DESCRIPCIÓN DETALLADA:**
     - **Navegación:** Restaurados y unificados los listeners para 'Cortes', 'Tutoriales' y 'Configuración Relay'.
     - **Dashboard:** Restaurada la funcionalidad completa del botón Dashboard.
     - **Modo Oscuro:** Implementada lógica con persistencia en localStorage e intercambio dinámico de logo.
     - **Layout:** Corregido bloqueo visual del carrusel de marcas mediante ajuste de padding y flex-shrink en el footer.

---
**TAREAS COMPLETADAS (Validadas por el PM)**
---
1. **TÍTULO: Reparación de Cambio de Contraseña y Mejora Visual de Tabla de Usuarios (v4.9.20)**
   - **ESTADO:** COMPLETADO
   - **ALCANCE:** users.html, services/users/users.js
   - **DESCRIPCIÓN DETALLADA:**
     - **Frontend:** Corregida la obtención robusta del ID de usuario (ID/id) y validación previa al envío.
     - **Backend:** Corregida la comparación de contraseñas para ser case-sensitive (seguridad y compatibilidad).
     - **Layout:** Ajustados estilos de tabla para evitar reducción de fuentes y márgenes, manteniendo el scroll invisible funcional.

---
**TAREAS COMPLETADAS (Validadas por el PM)**
---
1. **TÍTULO: Actualización de Endpoint de Usuarios y Refinamiento Compacto de Tabla (v4.9.21)**
   - **ESTADO:** COMPLETADO
   - **ALCANCE:** api-config.js, users.html
   - **DESCRIPCIÓN DETALLADA:**
     - **Configuración:** Actualizado el URL del microservicio USERS a la nueva versión proporcionada.
     - **Layout:** Refinamiento de la tabla de usuarios reduciendo paddings (8px 10px) y font-size (0.9rem) para un diseño más compacto y eficiente.

---
**TAREAS COMPLETADAS (Validadas por el PM)**
---
1. **TÍTULO: Reparación de Cambio de Contraseña y RBAC (v4.9.22 - v4.9.24)**
   - **ESTADO:** COMPLETADO
   - **ALCANCE:** users.html, services/users/users.js, api-config.js
   - **DESCRIPCIÓN DETALLADA:**
     - **Bug Fix:** Resuelta duplicidad de ID 'password-modal' y corregido ruteo de 'updateProfile'.
     - **RBAC:** Implementado control de acceso jerárquico y filtrado de visibilidad en backend y frontend.
     - **Perfil:** Añadida edición de nombre propio y bloqueo estricto de edición de username.
     - **Seguridad:** Reforzada validación de propiedad de cuenta y concurrencia (LockService).

2. **TÍTULO: Animaciones de Carga y Anti-bloqueo en Gestión de Usuarios (v4.9.25)**
   - **ESTADO:** COMPLETADO
   - **ALCANCE:** users.html
   - **DESCRIPCIÓN DETALLADA:**
     - **UX/UI:** Implementada animación de carga (spinner) y desactivación física (disabled) en botones de: Crear Usuario, Editar Usuario, Cambiar Contraseña, Editar Nombre y Eliminar Usuario.
     - **Estabilidad:** Añadida validación de estado de carga para prevenir múltiples envíos concurrentes (anti-bloqueo).

---
**TAREAS COMPLETADAS (Validadas por el PM)**
---
1. **TÍTULO: Carga Optimizada de Imágenes (Lazy Load) (v4.9.26)**
   - **ESTADO:** COMPLETADO
   - **ALCANCE:** ui.js, index.html
   - **DESCRIPCIÓN DETALLADA:**
     - **Lazy Load:** Implementado `loading="lazy"` en todas las tarjetas del catálogo.
     - **Resolución Adaptativa:** Definidas constantes de tamaño (300px para thumbnails, 800px para detalles).
     - **Lightbox Optimizado:** Las imágenes de alta resolución (1600px) solo se cargan mediante un trigger on-click, eliminando la carga innecesaria en segundo plano.
     - **Versionamiento:** Actualizada versión global a v4.9.26 y componente ui.js a v4.1.0.

---
**TAREAS PENDIENTES DE REVISIÓN**
---
TAREA 1: ORDENAR Y UNIFICAR README.md
==================================================
ESTADO: PENDIENTE
PRIORIDAD: MEDIA
ÁREA: DOCUMENTACIÓN

PROBLEMA IDENTIFICADO:
README.md contiene bloques de texto duplicados, desactualizados o contradictorios que no reflejan fielmente el estado actual del código y las funcionalidades reales de la plataforma.

REQUERIMIENTOS:
- Se debe auditar completamente README.md.
- Se deben identificar secciones repetidas o redundantes.
- Se deben unificar los textos duplicados en una sola fuente de verdad.
- Se debe asegurar que el contenido refleje exactamente:
  - Lo que el código hace actualmente
  - Las funcionalidades realmente existentes
  - Las limitaciones reales del sistema

REGLAS:
- No inventar funcionalidades.
- No documentar features no presentes en el código.
- No eliminar información útil, solo consolidarla.

RESULTADO ESPERADO:
- README.md claro, coherente y alineado con el estado real del proyecto.

TAREA 2: SISTEMA ANTI-DEBUGGING Y BLOQUEO DE INTERACCIONES NO PERMITIDAS
==================================================
ESTADO: PENDIENTE
PRIORIDAD: ALTA
ÁREA: FRONTEND / SEGURIDAD PWA

OBJETIVO:
Restringir el acceso a herramientas de inspección y acciones no permitidas en la PWA y versión web, sin afectar la experiencia normal del usuario.

REQUERIMIENTOS:
- Se debe impedir el uso de:
  - Consola del navegador (DevTools)
  - Menú contextual (click derecho)
  - Atajos de teclado de inspección
  - Zoom manual del navegador

EXCEPCIONES:
- El zoom SOLO debe estar permitido dentro de los lightbox de imágenes.
- Fuera del lightbox, el zoom debe estar completamente bloqueado.

CONSIDERACIONES:
- La implementación debe enfocarse especialmente en la versión PWA.
- No debe romper funcionalidades normales del catálogo.
- No debe afectar accesibilidad crítica.

TAREA 3: VERIFICACIÓN DE COMPATIBILIDAD PWA MULTI-SISTEMA
==================================================
ESTADO: PENDIENTE
PRIORIDAD: MEDIA
ÁREA: PWA / COMPATIBILIDAD

OBJETIVO:
Verificar y documentar la compatibilidad real de la PWA con los siguientes sistemas:

SISTEMAS A VERIFICAR:
- Android
- iOS
- HarmonyOS

REQUERIMIENTOS:
- Verificar instalación como PWA
- Verificar funcionamiento offline (si aplica)
- Verificar comportamiento de navegación y gestos
- Documentar limitaciones específicas por sistema

REGLAS:
- No asumir compatibilidad sin pruebas.
- Registrar hallazgos reales.

RESULTADO:
- Informe claro de compatibilidad real por sistema.

TAREA 4: CREAR CHANGELOG DE IMPLEMENTACIONES – GPSpedia 2.0 vs 1.5
==================================================
ESTADO: PENDIENTE
PRIORIDAD: ALTA
ÁREA: DOCUMENTACIÓN / VERSIONAMIENTO

OBJETIVO:
Crear un ChangeLog formal que liste TODAS las funcionalidades presentes en GPSpedia 2.0 que NO existen en GPSpedia 1.5 (Olds / GPSpedia1.5).

REQUERIMIENTOS:
- Crear un archivo de ChangeLog claro y ordenado.
- Comparar explícitamente GPSpedia 2.0 vs GPSpedia 1.5.
- No repetir información vaga; debe ser concreta y verificable.

FUNCIONALIDADES A INCLUIR (LISTA BASE, NO LIMITADA):
- Sistema de Feedback
- Sistema de Inbox
- Modal de Relay dentro del modal de detalles
- Manejo de versiones de equipamiento
- Mejor gestión del rango de años por generación
- Navegación por marca
- Mejora en sistema anti-duplicado al agregar cortes
- Sistema de gestión de usuarios por roles
- Tema nocturno
- Documentación externa:
  - FAQs (modal)
  - Contáctanos
  - Sobre Nosotros
- Mejor gestión de imágenes (resoluciones, lazy load)
- Expansión de categorías de vehículos
- Mejoras generales de UI/UX
- Cualquier otra funcionalidad presente en 2.0 que no exista en 1.5

REGLAS:
- No incluir features heredadas que ya existían en 1.5.
- No exagerar ni inflar la lista.
- Todo debe corresponder a funcionalidades reales.

RESULTADO ESPERADO:
- Documento claro que justifique técnicamente la versión 2.0.
- Diferenciación clara entre GPSpedia 1.5 y 2.0.

---
**DERIVADO DE AUDITORÍA (ROADMAP v2.0) — NO EJECUTAR AÚN**
---

*No hay tareas pendientes en esta sección.*
