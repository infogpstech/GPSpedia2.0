**V8.4.0 - (FEATURE & CONFIG) - 09/01/2026**
**A. RESUMEN GENERAL:** Se implementó de extremo a extremo la funcionalidad para gestionar el nombre completo de los usuarios y se actualizó el endpoint del servicio de usuarios a su nueva URL de producción.

**B. Mejoras y Correcciones Implementadas:**
1.  **Implementación de "Nombre Completo" (`services/users/users.js` y `users.html`):**
    *   **Backend:** Se actualizó el esquema de la base de datos y la lógica del servicio para aceptar, almacenar y devolver el nombre completo del usuario.
    *   **Frontend:** Se corrigió el formulario de gestión de usuarios para que envíe el nombre completo al backend, completando la funcionalidad.

2.  **Actualización de Configuración (`api-manager.js`):**
    *   Se actualizó la constante `API_ENDPOINTS.USERS` para que apunte a la nueva URL del servicio de usuarios desplegado, asegurando que el frontend se comunique con la versión más reciente del backend.

**C. Cambios Técnicos Implementados:**
- **`services/users/users.js`:** Se actualizó `COLS_USERS` y las funciones `handleCreateUser`, `handleUpdateUser` y `handleGetUsers`.
- **`users.html`:** Se actualizó `handleUserFormSubmit` para enviar el campo `Nombre_Completo`.
- **`api-manager.js`:** Se modificó la URL del endpoint para el servicio `USERS`.

**D. Impacto:**
-   **Funcionalidad Crítica Habilitada:** El sistema ahora puede gestionar de forma completa el nombre completo de los usuarios.
-   **Conectividad Asegurada:** El frontend ahora se comunica con el servicio de usuarios correcto y más reciente.

**V8.3.5 - (FEATURE) - 11/01/2024**
**A. RESUMEN GENERAL:** Se implementó una mejora significativa en la calidad de las imágenes mostradas en el modal de detalles del vehículo y se corrigió un error que impedía la visualización de los "Cortes Alternativos".

**B. Mejoras y Correcciones Implementadas:**
1.  **Carga de Imágenes en Alta Resolución (`api.js` y `ui.js`):**
    *   **Problema:** Las imágenes de los cortes se cargaban en baja resolución, dificultando la visualización de detalles técnicos importantes.
    *   **Solución:**
        *   Se modificó la función `getImageUrl` en `api.js` para aceptar un parámetro numérico de tamaño y construir una URL de Google Drive con el formato `sz=w<numero>` (ej. `sz=w1000`).
        *   Se actualizó la función `renderCutContent` en `ui.js` para que solicite explícitamente las imágenes de los cortes con un tamaño de `1000`, asegurando la máxima resolución disponible.
        *   Se extendió esta lógica a todas las imágenes dentro del modal, incluyendo las de secciones de "Apertura" y "Cables de Alimentación".

2.  **Corrección de Renderizado de Cortes Alternativos (`ui.js`):**
    *   **Problema:** Un error en la lógica de la función `createAccordionSection` provocaba que el contenido de los cortes alternativos no se renderizara, ocultando información valiosa al usuario.
    *   **Solución:** Se refactorizó `createAccordionSection` para que, cuando detecte que una sección es un corte, reutilice la función `renderCutContent`. Esto soluciona el error de renderizado y, al mismo tiempo, aplica la nueva lógica de carga de imágenes en alta resolución de manera consistente.

**C. Cambios Técnicos Implementados:**
- **`api.js`:** Se mejoró la función `getImageUrl` para manejar de forma más robusta el parámetro de tamaño.
- **`ui.js`:** Se actualizó `renderCutContent` para llamar a `getImageUrl` con `size=1000`. Se refactorizó `createAccordionSection` para llamar a `renderCutContent`, corrigiendo así un bug y aplicando la mejora de resolución de manera uniforme.

**D. Impacto:**
-   **Mejora Crítica de UX:** Los usuarios ahora pueden ver imágenes de alta calidad y hacer zoom en detalles técnicos finos, lo cual es esencial para la funcionalidad principal de la aplicación.
-   **Funcionalidad Restaurada:** Se ha corregido un bug que impedía a los usuarios ver los cortes alternativos, asegurando que toda la información disponible para un vehículo sea accesible.

**V8.3.4 - (REGRESSION FIX) - 11/01/2024**
**A. RESUMEN GENERAL:** Se corrigieron múltiples regresiones visuales en el modal de detalles del vehículo, restaurando el diseño y la alineación correctos de sus componentes, especialmente en la cabecera y en la visualización de imágenes.

**B. Correcciones Implementadas:**
1.  **Alineación de Cabecera del Modal (`ui.js`):**
    *   **Problema:** El logo de la marca y el título del vehículo en la cabecera del modal estaban centrados en lugar de alineados a la izquierda.
    *   **Solución:** Se añadió la propiedad `justifyContent: 'flex-start'` al contenedor flex de la cabecera, asegurando que los elementos se alineen correctamente al inicio del contenedor.

2.  **Refactorización de Estilos de Imagen (`style.css`):**
    *   **Problema:** Una regla de CSS genérica (`#detalleCompleto img`) estaba aplicando estilos de "contenedor" (`box-shadow`, `border-radius`) y una altura máxima (`max-height: 300px`) a *todas* las imágenes del modal, causando que el logo y la imagen del vehículo se vieran incorrectamente y que las imágenes de los cortes no se escalaran adecuadamente.
    *   **Solución:** Se eliminó la propiedad `max-height` de la regla genérica para permitir que las imágenes se escalen proporcionalmente a su ancho. Los estilos de contenedor (`box-shadow`, `border-radius`) fueron movidos de la regla genérica a la clase más específica `.image-with-container`, que solo se aplica a las imágenes de los cortes.

3.  **Especificidad en Estilos Móviles (`style.css`):**
    *   **Problema:** La regla que definía el ancho de la imagen del corte al 80% en dispositivos móviles no se estaba aplicando debido a baja especificidad.
    *   **Solución:** Se aumentó la especificidad del selector a `#modalDetalle #detalleCompleto .img-corte` para garantizar que la regla de ancho del 80% anule cualquier otra regla conflictiva en vistas móviles.

**C. Cambios Técnicos Implementados:**
- **`ui.js`:** Se ajustó el estilo flex del `modalHeader` para incluir `justifyContent: 'flex-start'`.
- **`style.css`:** Se refactorizó la regla `#detalleCompleto img` eliminando `max-height` y se aumentó la especificidad del selector para `.img-corte` en la media query de móviles.

**D. Impacto:**
-   **Consistencia Visual Restaurada:** El modal de detalles del vehículo ahora se renderiza de manera consistente y correcta en todos los tamaños de pantalla, alineándose con las especificaciones de diseño y eliminando las regresiones visuales introducidas previamente.

**V8.3.3 - (REGRESSION FIX) - 11/01/2024**
**A. RESUMEN GENERAL:** Se implementó la corrección definitiva para la regresión de estilos en el modal de detalles, asegurando que las imágenes se muestren según las especificaciones exactas, y se reparó una regresión crítica en la página de gestión de usuarios.

**B. Correcciones Implementadas:**
1.  **Refactorización de Estilos (`style.css` y `ui.js`):**
    *   **Problema:** Una regla de estilo genérica (`#detalleCompleto img`) aplicaba un `box-shadow` y `border-radius` a todas las imágenes del modal, creando un efecto de "contenedor" no deseado.
    *   **Solución:** Se refactorizó el CSS. Se eliminaron las propiedades `box-shadow` y `border-radius` de la regla genérica. Se creó una nueva clase, `.image-with-container`, para contener estos estilos. Dicha clase se aplicó explícitamente en `ui.js` solo a las imágenes que la requieren (imágenes de cortes, etc.), dejando las imágenes del logo y del vehículo sin estos estilos.
    *   **Resultado:** Las imágenes del logo y del vehículo ahora se muestran correctamente solo con el `filter: drop-shadow(...)` aplicado, sin ningún contenedor visual.

2.  **Reparación de Funcionalidad en `users.html`:**
    *   **Problema:** Los botones "Eliminar Usuario" y "Cambiar Contraseña" fallaban debido a la falta de autorización.
    *   **Causa Raíz:** Las llamadas a la API para estas acciones no incluían el `sessionToken` del usuario.
    *   **Solución:** Se actualizaron las funciones `deleteUser` y `handleChangePasswordSubmit` para incluir el `sessionToken` en el payload de la solicitud, restaurando completamente la funcionalidad.

**C. Cambios Técnicos Implementados:**
- **`style.css`:** Se refactorizó la regla `#detalleCompleto img`, se creó la clase `.image-with-container`, y se ajustaron las reglas para `.img-vehiculo-modal` y `.brand-logo-modal`.
- **`ui.js`:** Se añadió la clase `.image-with-container` a los elementos `img` que lo necesitaban.
- **`users.html`:** Se añadió el `sessionToken` a las llamadas a `deleteUser` y `handleChangePasswordSubmit`.

**D. Impacto:**
-   **Alineación Visual Definitiva:** La apariencia del modal de detalles ahora coincide exactamente con las especificaciones de diseño.
-   **Funcionalidad Restaurada:** La página de gestión de usuarios es de nuevo completamente funcional.

**V8.3.2 - (REGRESSION FIX) - 11/01/2024**
**A. RESUMEN GENERAL:** Se corrigió la regresión de estilos en el modal de detalles del vehículo, que provocaba que las imágenes del logo y del modelo se mostraran con un "contenedor" no deseado.

**B. Corrección de Estilos (`style.css` y `ui.js`):**
1.  **Diagnóstico:** Se identificó que una regla de estilo genérica para `#detalleCompleto img` estaba aplicando `box-shadow` y `border-radius` a todas las imágenes dentro del modal.
2.  **Solución:**
    *   **`ui.js`:** Se añadió una clase específica, `.brand-logo-modal`, a la imagen del logo de la marca para permitir un estilo independiente.
    *   **`style.css`:** Se crearon nuevas reglas de alta especificidad (`#detalleCompleto .img-vehiculo-modal`, `#detalleCompleto .brand-logo-modal`) que anulan (`!important`) las propiedades `background`, `border`, `border-radius` y `box-shadow`. En su lugar, se aplica la propiedad `filter: drop-shadow(...)` para lograr el efecto visual solicitado sin un contenedor.

**C. Cambios Técnicos Implementados:**
- **`ui.js`:** Se añadió `className = 'brand-logo-modal'` al elemento de imagen del logo.
- **`style.css`:** Se añadieron reglas de anulación con `!important` para las clases `.img-vehiculo-modal` y `.brand-logo-modal` para eliminar los estilos de contenedor y aplicar `filter`.

**D. Impacto:**
-   **Alineación Visual Completa:** La apariencia de las imágenes en el modal de detalles ahora coincide exactamente con las especificaciones de diseño, mostrando solo la imagen con una sombra, sin ningún tipo de borde o fondo.

**V8.3.1 - (REGRESSION FIX) - 11/01/2024**
**A. RESUMEN GENERAL:** Se corrigieron las regresiones funcionales críticas en la página de gestión de usuarios (`users.html`) y se finalizaron los ajustes de estilo en el modal de detalles del vehículo para que coincidan con las especificaciones.

**B. Correcciones Críticas y de Estilo:**
1.  **Reparación de Regresión Funcional en `users.html`:**
    *   **Problema:** Los botones "Eliminar Usuario" y "Cambiar Contraseña" no funcionaban y devolvían un error de "Datos insuficientes".
    *   **Causa Raíz:** Las llamadas a la API para estas acciones no incluían el `sessionToken` del usuario, que es requerido por el backend para la autorización.
    *   **Solución:** Se modificaron las funciones `deleteUser` y `handleChangePasswordSubmit` para incluir el `sessionToken` en el payload enviado al backend, restaurando la funcionalidad completa.

2.  **Ajustes Finales de Estilo (`style.css`):**
    *   **Imágenes de Logo y Modelo:** Se ajustó la regla `.img-vehiculo-modal` para eliminar la propiedad `box-shadow` y asegurar que no haya estilos de contenedor, cumpliendo con el requisito de mostrar solo la imagen con `drop-shadow`.
    *   **Lightbox:** Se restauraron las propiedades `max-width: 95%` y `max-height: 95%` a la regla `.lightbox img` para asegurar que las imágenes grandes sean completamente visibles en la pantalla sin necesidad de hacer scroll, al tiempo que se permite que las imágenes más pequeñas se muestren a su tamaño real sin ser estiradas.

**C. Cambios Técnicos Implementados:**
- **`users.html`:** Se añadió la propiedad `sessionToken` a los payloads de las llamadas a `postToAction` en las funciones `deleteUser` y `handleChangePasswordSubmit`.
- **`style.css`:** Se eliminó `box-shadow` de `.img-vehiculo-modal` y se reintrodujeron los límites de tamaño en `.lightbox img`.

**D. Impacto:**
-   **Restaura Funcionalidad Crítica:** La página de gestión de usuarios es ahora completamente funcional, incluyendo la eliminación de usuarios y el cambio de contraseñas.
-   **Calidad Visual Mejorada:** La apariencia del modal de detalles se alinea finalmente con todas las especificaciones de diseño, y el lightbox ahora maneja imágenes grandes de manera más usable.
