<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Información - GPSpedia</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: Arial, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; color: #333; }
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: #fff;
            margin: auto;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            width: 90%;
            max-width: 600px;
            position: relative;
        }
        .close-btn {
            color: #aaa;
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close-btn:hover, .close-btn:focus { color: black; }
        h1, h2 { color: #007bff; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .accordion { margin-top: 20px; }
        .accordion-item { border-bottom: 1px solid #eee; }
        .accordion-header { padding: 15px; cursor: pointer; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
        .accordion-header:hover { background-color: #f7f7f7; }
        .accordion-content { padding: 0 15px; max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        .btn { padding: 12px 25px; border: none; border-radius: 8px; background-color: #007bff; color: white; font-size: 1em; cursor: pointer; transition: background-color 0.3s; }
    </style>
</head>
<body>

    <!-- Modal "Sobre Nosotros" -->
    <div id="about-us-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeAllModals()">&times;</span>
            <section id="about-us">
                <h2>Sobre Nosotros</h2>
                <p>GPSpedia es una herramienta interna diseñada para técnicos e instaladores de GPS, con el objetivo de centralizar el conocimiento sobre puntos de corte de corriente e ignición en vehículos. Nuestra misión es mejorar la eficiencia y estandarizar las instalaciones, reduciendo errores y tiempos de trabajo.</p>
                <p>Esta plataforma es de uso exclusivo para personal autorizado y su contenido es confidencial. Agradecemos la colaboración de todos para mantener la información actualizada y precisa.</p>
            </section>
        </div>
    </div>

    <!-- Modal "Contáctanos" -->
    <div id="contact-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeAllModals()">&times;</span>
            <section id="contact">
                <h2>Contáctanos</h2>
                 <p>Si tienes sugerencias, problemas con la plataforma o necesitas soporte técnico, por favor utiliza este formulario. Tu feedback es importante para nosotros.</p>
                <form id="contact-form">
                    <div class="form-group">
                        <label for="contact-name">Nombre</label>
                        <input type="text" id="contact-name" required>
                    </div>
                    <div class="form-group">
                        <label for="contact-email">Correo Electrónico</label>
                        <input type="email" id="contact-email" required>
                    </div>
                    <div class="form-group">
                        <label for="contact-message">Mensaje</label>
                        <textarea id="contact-message" rows="5" required></textarea>
                    </div>
                    <button type="submit" class="btn">Enviar Mensaje</button>
                </form>
            </section>
        </div>
    </div>

    <!-- Modal "Preguntas Frecuentes" -->
    <div id="faq-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeAllModals()">&times;</span>
            <section id="faq">
                <h2>Preguntas Frecuentes</h2>
                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header">¿Cómo busco un vehículo?<i class="fas fa-chevron-down"></i></div>
                        <div class="accordion-content"><p>Utiliza la barra de búsqueda en la página principal. Puedes buscar por marca, modelo, año o tipo de encendido para encontrar rápidamente la información que necesitas.</p></div>
                    </div>
                    <div class="accordion-item">
                        <div class="accordion-header">¿Qué hago si no encuentro un vehículo?<i class="fas fa-chevron-down"></i></div>
                        <div class="accordion-content"><p>Si un vehículo no está en el catálogo, tienes la opción de añadirlo. Usa el botón "Agregar Nuevo" en el menú lateral y completa el formulario con la información que tengas.</p></div>
                    </div>
                    <div class="accordion-item">
                        <div class="accordion-header">¿Cómo puedo reportar un error en la información?<i class="fas fa-chevron-down"></i></div>
                        <div class="accordion-content"><p>Dentro de los detalles de cada corte, encontrarás un botón rojo para "Reportar". Úsalo para informarnos sobre cualquier dato incorrecto o para sugerir mejoras. Tu colaboración es clave.</p></div>
                    </div>
                     <div class="accordion-item">
                        <div class="accordion-header">¿Puedo usar la aplicación sin conexión a internet?<i class="fas fa-chevron-down"></i></div>
                        <div class="accordion-content"><p>Actualmente, GPSpedia requiere una conexión a internet activa para funcionar, ya que obtiene los datos en tiempo real. Estamos explorando opciones para funcionalidades offline en el futuro.</p></div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script src="api-manager.js"></script>
    <script>
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'flex';
            }
        }

        function closeAllModals() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.style.display = 'none';
            });
            // Al cerrar un modal, volver a la página principal
            window.location.href = 'index.html';
        }

        window.onclick = function(event) {
            document.querySelectorAll('.modal').forEach(modal => {
                if (event.target == modal) {
                    closeAllModals();
                }
            });
        }

        // Script para acordeón de FAQ
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                const isActive = content.style.maxHeight;

                // Cerrar todos los demás
                document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = null);

                // Abrir el que se clickeó (si no estaba abierto)
                if (!isActive) {
                    content.style.maxHeight = content.scrollHeight + "px";
                }
            });
        });

        // Lógica para enviar el formulario de contacto al backend
        document.getElementById('contact-form').addEventListener('submit', async e => {
            e.preventDefault();
            const name = document.getElementById('contact-name').value;
            const email = document.getElementById('contact-email').value;
            const message = document.getElementById('contact-message').value;

            try {
                const response = await routeAction('sendContactForm', { name, email, message });
                if (response.status === 'success') {
                    alert('¡Gracias por tu mensaje! Nos pondremos en contacto contigo pronto.');
                    closeAllModals();
                } else {
                    throw new Error(response.message || 'Error desconocido');
                }
            } catch (error) {
                 alert(`Error al enviar el mensaje: ${error.message}`);
            }
        });

        // Mostrar el modal correcto al cargar la página basado en el hash de la URL
        window.addEventListener('DOMContentLoaded', () => {
            const hash = window.location.hash.substring(1); // ej. 'contact'
            if (hash) {
                openModal(hash + '-modal');
            } else {
                // Si no hay hash, por defecto podría abrir el de 'about-us' o ninguno
                 openModal('about-us-modal');
            }
        });
    </script>
</body>
</html>
